<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Colin's Personal Space</title>

  <meta http-equiv="Content-Security-Policy"
    content="
      default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https:;
      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://static.cloudflareinsights.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net;
      media-src 'self' data: blob: https://audio.lifeofcy.cc;
      connect-src 'self' https://static.cloudflareinsights.com;
      img-src 'self' data: https:;
      style-src 'self' 'unsafe-inline' https:;
      upgrade-insecure-requests;
    ">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <div id="logo" class="logo">
    <img src="your-logo.svg" alt="Logo">
  </div>

  <audio id="welcomeAudio" preload="auto" crossorigin="anonymous">
    <source src="https://audio.lifeofcy.cc/audio%20files%20for%20lifeofcy/Welcome%20voice.webm" type="audio/webm">
    </audio>

  <script>
    const logo = document.getElementById('logo');
    const audio = document.getElementById('welcomeAudio');

    // ✅ 动画与音频状态同步：不再使用 isPlaying 变量，直接监听音频原生事件
    logo.addEventListener('click', () => {
      if (audio.paused) {
        audio.play().catch(err => console.error('播放失败:', err));
      } else {
        audio.pause();
      }
    });

    // 监听播放状态以开启旋转
    audio.addEventListener('playing', () => {
      logo.classList.add('playing');
    });

    // 监听暂停和结束以停止旋转
    audio.addEventListener('pause', () => {
      logo.classList.remove('playing');
    });

    audio.addEventListener('ended', () => {
      logo.classList.remove('playing');
      audio.currentTime = 0;
    });

    // 调试报错
    audio.addEventListener('error', (e) => {
      console.error('音频加载错误，请检查链接或 CSP:', e);
    });
  </script>

</body>
</html>
