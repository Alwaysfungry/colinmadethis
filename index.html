<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
 <meta http-equiv="Content-Security-Policy" content="
  default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:
    https://cdnjs.cloudflare.com
    https://cdn.jsdelivr.net
    https://code.jquery.com
    https://unpkg.com
    https://fonts.googleapis.com
    https://fonts.gstatic.com;

  media-src
    'self'
    https://github.com
    https://raw.githubusercontent.com
    https://objects.githubusercontent.com
    https://audio.lifeofcy.cc;
">

  <title>Personal Resume</title>

  <style>
    /* ===== existing styles (unchanged) ===== */

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .logo {
      width: 48px;
      height: 48px;
      cursor: pointer;
    }

    /* icon animation */
    .logo svg {
      animation: pulse 2.4s ease-in-out infinite;
    }

    .logo.playing svg {
      animation-duration: 0.9s;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }
  </style>
</head>

<body>

  <!-- ===== Logo / Audio Trigger ===== -->
  <div class="logo" id="logo" aria-label="Play welcome audio">
    <!-- your existing SVG icon -->
    <svg viewBox="0 0 100 100" width="48" height="48">
      <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="6"/>
    </svg>
  </div>

  <!-- ===== rest of your page content stays exactly the same ===== -->


  <script>
    /* ======================================
       AUDIO + ANIMATION (FIXED VERSION)
       ====================================== */

    const logo = document.getElementById("logo");

    // Create ONE persistent audio instance
    const welcomeAudio = new Audio(
      "https://your-cloudflare-url/welcome.mp3"
    );
    welcomeAudio.preload = "auto";

    let isPlaying = false;

    function playAudio() {
      welcomeAudio.play().then(() => {
        isPlaying = true;
        logo.classList.add("playing");
      }).catch(err => {
        console.warn("Audio play blocked or failed:", err);
      });
    }

    function stopAudio() {
      welcomeAudio.pause();
      welcomeAudio.currentTime = 0;
      isPlaying = false;
      logo.classList.remove("playing");
    }

    logo.addEventListener("click", () => {
      if (isPlaying) {
        stopAudio();
      } else {
        playAudio();
      }
    });

    // Ensure animation resets when audio naturally ends
    welcomeAudio.addEventListener("ended", () => {
      isPlaying = false;
      logo.classList.remove("playing");
    });
  </script>

</body>
</html>

